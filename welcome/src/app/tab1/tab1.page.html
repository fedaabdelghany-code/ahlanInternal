<ion-header [translucent]="false">
  <ion-toolbar class="toolbar-custom">
    <ion-buttons slot="start">
      <ion-menu-button autoHide="false"></ion-menu-button>
    </ion-buttons>
    <ion-title class="custom-title">Sokhna Plant Companion</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="dashboard-content">

  <!-- Hero Section -->
  <div class="greeting-hero">
    <img
      *ngFor="let image of images; let i = index"
      [src]="image.src"
      [alt]="image.alt"
      class="pyramids-image"
      [ngClass]="{ 'active': i === currentImageIndex }"
    />
    <div class="image-darken-layer"></div>
    <div class="greeting-overlay">
      <h2>{{ getGreetingByCountry(country) }}, {{firstName}}!</h2>
    </div>
  </div>

  <!-- Row for Weather and Currency Cards -->
  <div class="card-row">
    <ion-card class="weather-card">
      <ion-card-content class="weather-content">
        <img [src]="iconUrl" alt="{{ condition }}" class="weather-icon" />
        <p class="weather-temp">{{ temperature }}Â°C</p>
        <p class="weather-info">{{ condition }} in {{ city }}</p>
      </ion-card-content>
    </ion-card>

    <ion-card *ngIf="safetyInductionCompleted !== null" class="safety-card">
      <ion-card-content>
        <img src="assets/safety.png" alt="Safety Icon" class="safety-icon" />
        <p *ngIf="safetyInductionCompleted === false">
          <a [href]="safetyInductionLink" target="_blank">Safety Induction</a>
        </p>
        <p *ngIf="safetyInductionCompleted === true">
          <a [href]="safetyInductionLink" target="_blank">View Permit</a>
        </p>
      </ion-card-content>
    </ion-card>

    <ion-card class="highlight-card local-card local-card-currency">
      <ion-card-content class="highlight-content">
        <a href="https://drive.google.com/drive/folders/1wXzMaopgmMhmd7Q-TLrE7uTsOZnNE2Ps" target="_blank" style="text-decoration: none;">
          <ion-card-content class="highlight-content">
            <img src="assets/photos.png" alt="Album Cover" style="width: 50%; max-width: 100px; margin: 0 auto; display: block;" />
          </ion-card-content>
          <h3 style="color:#0074a6; margin-top: -10px;">Photos</h3>
        </a>
      </ion-card-content>
    </ion-card>
  </div>

  <div class="app-intro">
    <img src="assets/guy.png" alt="Excited Sticker" class="sticker-img" />
    <div class="speech-bubble">
      <h5 class="intro-title" style="color: #1d4370">Ahlan!</h5>
      <p>
        In Arabic, "Ahlan" means "welcome," and "Ahlan wa sahlan" adds, "may your arrival be easy." Like the greeting, this app is here to make your visit easy with quick access to your schedule, local info, and more.
      </p>
    </div>
  </div>

  <hr class="holcim-gradient-line" />


  <!-- Schedule Header -->
  <div class="schedule-header">
    <h4>{{ getScheduleHeaderText() }}</h4>
    <div style="height: 5px;"></div>
    <p class="schedule-date">
      {{ selectedDate | date: 'fullDate' }}
    </p>
  </div>

  <!-- Today's Schedule Cards -->
  <div class="schedule-section" *ngIf="userBatch !== 'NONE' && scheduleData[selectedDate]?.length; else noEvents">
    <ion-card
      *ngFor="let item of scheduleData[selectedDate]; let i = index"
      [class]="['highlight-card', item.color, expandedIndex === i ? 'expanded' : ''].join(' ')"
      (click)="toggleCard(i)"
    >
      <ion-card-content>
        <h3>{{ item.title }}</h3>
        <p>
          <ion-icon name="time-outline"></ion-icon>
          {{ item.time }}
        </p>
        <p *ngIf="item.location && item.location !== 'N/A'">
          <ion-icon name="location-outline"></ion-icon>
          {{ item.location }}
        </p>
      </ion-card-content>
    </ion-card>
  </div>

  <ng-template #noEvents>
    <div class="no-events-container">
      <img src="assets/explore.png" alt="Holcim Logo" class="explore-img" />
      <p class="no-events-text" *ngIf="userBatch !== 'NONE'">All clear today!</p>
      <p class="no-events-text" *ngIf="userBatch === 'NONE'">Your email is not registered for this event. Please contact the administrator.</p>
    </div>
  </ng-template>

</ion-content>